<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

  <link rel="canonical" href="https://code-maven.com/jenkins-in-docker" />

  <link rel="prev" href="vagrant-for-jenkins-on-ubuntu.html">
  <link rel="next" href="jenkins-pipeline-hello-world.html">

  <link href="/atom" rel="alternate" type="application/atom+xml" title ="Code Maven" />

  <script>
    var user_info = {"logged_in":0};
  </script>

  <!-- Google recommended indication of translated versions -->
  


  <title>Running Jenkins in Docker</title>
  <meta name="description" content="Running Jenkins in Docker">
  <meta name="author" content="szabgab">

  <!-- The Open Graph protocol -->
  <meta property="og:title" content="Running Jenkins in Docker"/>
  <meta property="og:type" content="article"/>
  
      <meta property="og:image" content="/img/code_maven_128.png"/>
  
  <meta property="og:site_name" content="Code Maven"/>
  <meta property="og:description" content="Running Jenkins in Docker"/>
  

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet">


  <link href="css/style.css" rel="stylesheet">
  
  <link href="stati css/site.css" rel="stylesheet">

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="javascripts/perlmaven.js?20210507.1"></script>
  <script src="js/maven.js"></script>

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@szabgab" />
  <meta name="twitter:creator" content="@szabgab" />
  <meta name="twitter:title" content="Running Jenkins in Docker" />
  <meta name="twitter:description" content="Running Jenkins in Docker" />
  
     <meta name="twitter:image" content="img/code_maven_128.png" />
  
</head>
<body>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <nav class="navbar navbar-default navbar-fixed-top navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Code Maven</a>
    </div>


    <div class="collapse navbar-collapse" id="navbar">
      
        <ul class="nav navbar-nav   ">
          
            

<!--
            
              
                <li><a href="/pm/login">Login</a></li>
                <li><a href="/pm/register">Register</a></li>
              
            
-->

            

            
                        <li><a href="/exercises">Exercises</a></li>
            

<!--
            
-->

            

            
                        <li><a href="/slides">Slides</a></li>
            

<!--
            
-->

            

            
                        <li><a href="/courses">Courses</a></li>
            

<!--
            
-->

            

            
                        <li><a href="/services">Services</a></li>
            

<!--
            
-->

            

            
          
        </ul>
      
        <ul class="nav navbar-nav navbar-right  ">
                        <li><a href="/keywords">Type keyword:</a></li>
            

<!--
            
-->

            

            
          
            

<!--
            
-->

            
              <li><form id="search_form">
                     <input id="search_box" type="text" data-provide="typeahead" data-items="4" aria-label="Enter your search term">
                  </form>
              </li>
            

            
                        <li><a href="/archive">Archive</a></li>
            

<!--
            
-->

            

            
                        <li><a href="/about">About</a></li>
            

<!--
            
-->

            

            
          
            

<!--
            
-->

            

            
              <li><a href="/atom" rel="alternate" type="application/atom+xml"><img src="img/feed-icon16x16.png" id="atom-icon" alt="Atom feed" /></a></li>
            
          
        </ul>
      
    </div>
  </div>
</nav>


    </div>
  </div>

  <div class="row">
    <div class="col-md-2" id="left-column">

            
         
      


      
<div id="series">
  <a href="/jenkins">Jenkins</a>
  
  <hr>
  <ol>
  
    <li>Installations
      <ol>
        
          <li>
            <a  href="install-jenkins-on-ubuntu.html">Install Jenkins on Ubuntu</a>
            
          </li>
        
          <li>
            <a  href="vagrant-for-jenkins-on-ubuntu.html">Vagrant for Jenkins on Ubuntu</a>
            
          </li>
        
          <li>
            <a class="current" href="jenkins-in-docker.html">Running Jenkins in Docker</a>
            <span class="glyphicon glyphicon-ok"></span>
          </li>
        
      </ol>
    </li>
  
    <li>Examples
      <ol>
        
          <li>
            <a  href="jenkins-pipeline-hello-world.html">Jenkins Pipeline - Hello World</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-running-external-programs.html">Jenkins Pipeline: running external programs with sh or bat</a>
            
          </li>
        
          <li>
            <a  href="jenkins-send-email-notifications.html">Jenkins Pipeline: Send e-mail notifications</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-short-text.html">Jenkins Pipeline: Add some text to the job using manager.addShortText</a>
            
          </li>
        
          <li>
            <a  href="jenkins-cli-create-node.html">Jenkins CLI: create node</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-builduser.html">Jenkins Pipeline BuildUser plugin</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-environment-variables.html">Jenkins Pipeline - set and use environment variables</a>
            
          </li>
        
          <li>
            <a  href="jenkins-git-check-out-using-reference.html">Jenkins Pipeline: git checkout using reference to speed up cloning large repositories</a>
            
          </li>
        
          <li>
            <a  href="jenkins-report-failed-stage-name.html">Jenkins report the name of the stage that failed</a>
            
          </li>
        
          <li>
            <a  href="jenkins-triggers.html">Jenkins triggers: Periodic polling</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-set-job-name-and-description.html">How to set the job number and description for a Jenkinsfile in a Jenkins Pipeline?</a>
            
          </li>
        
          <li>
            <a  href="jenkins-readfile-writefile.html">Jenkins Pipeline: read a file and write a file - readFile, writeFile</a>
            
          </li>
        
          <li>
            <a  href="jenkins-separate-jobs-for-development-and-production.html">Jenkins: separate jobs for development and production</a>
            
          </li>
        
          <li>
            <a  href="jenkins-get-current-user.html">Jenkins pipeline: get current user</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-parameters.html">Jenkins Pipeline parameters</a>
            
          </li>
        
          <li>
            <a  href="jenkins-arbitrary-code-execution.html">Jenkins pipelines: Arbitrary code execution in the shell</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-parallel-stages.html">Jenkins pipeline: parallel stages</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-collect-exit-code-from-external-commands.html">Jenkins Pipeline: Collect exit code from external commands</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-get-previous-build-status.html">Jenkins pipeline: Get previous build status - getPreviousBuild</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-interactive-input-during-process.html">Jenkins pipeline: interactive input during process</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-list-agents-by-name-or-by-label.html">Jenkins pipeline: List agents by name or by label</a>
            
          </li>
        
          <li>
            <a  href="jenkins-pipeline-add-badges.html">Jenkins pipeline: add badges</a>
            
          </li>
        
      </ol>
    </li>
  
  </ol>
</div>



    </div>
    <div class="col-md-7" id="content">




<div id="show_content">
<h1>Running Jenkins in Docker</h1>




  <div id="indexes">
    <ul>
      
         <li><a class="btn btn-mini btn-primary kw-button" href="/search/Jenkins">Jenkins</a></li>
      
         <li><a class="btn btn-mini btn-primary kw-button" href="/search/Docker">Docker</a></li>
      
    </ul>
  </div>



<div class="prev-next">
<h2>

  <span class="label label-lg label-success prev">
    <a href="vagrant-for-jenkins-on-ubuntu.html" title="Vagrant for Jenkins on Ubuntu"><span class="glyphicon glyphicon-chevron-left"></span> Prev</a>
  </span>



  <span class="label label-lg label-success next">
    <a href="jenkins-pipeline-hello-world.html" title="Jenkins Pipeline - Hello World">Next <span class="glyphicon glyphicon-chevron-right"></span> </a>
  </span>
</h2>
</div>





<div role="main" id="main">

  <div id="top-poster"></div>

  <div id="abstract">
    
    <div id="abstract_text"> <p>
In this example we'll see how to run a single-node Jenkins system in Docker.
<p>
</div>
  </div>
  <div id="after-abstract"></div>
  
  <p>
I found this article about <a href="https://www.jenkins.io/blog/2018/12/10/the-official-Docker-image/">the official Docker image</a>
that lead me to the <a href="https://hub.docker.com/r/jenkins/jenkins/">jenkins/jenkins</a> image.
<p>
<h2>Launch the first time</h2>
<p>
<pre class="linenums">
docker run -d -v jenkins_home:/var/jenkins_home -p 8080:8080 -p 50000:50000 --name jenkins_master --rm jenkins/jenkins:lts
</pre>
<p>
<ul>
   <li>This will run The container in the background (as a daemon) because of the <b>-d</b> flag.</li>
   <li>It will make the <b>/var/jenkins_home</b> of the container to a Jenkins volume called <b>jenkins_home</b>. If the volume does not exist it will create it. We need the volume to have persistence between re-launches.</li>
   <li><b>-p</b> maps the ports</li>
   <li><b>--name jenkins_master</b> will call Docker container jenkins_master. You can of course use any other name, but we'll need this name later on. Internally Jenkins refers to this node as "master" regardless of the name of the container you choose here.</li>
   <li><b>--rm</b> tells Docker to remove the container when we stopped running it.</li>
</ul>
<p>
<h3>Copy secret</h3>
<p>
Once it launched we need to copy the one-time secret created by Jenkins, so type in:
<p>
<pre class="linenums">
docker container cp jenkins_master:/var/jenkins_home/secrets/initialAdminPassword .
</pre>
<p>
(There is a separate dot at the end!)
<p>
The take the content of the file:
<p>
If your host is Linux/OSX use:
<p>
<pre class="linenums">
cat initialAdminPassword
</pre>
<p>
If your host is Windows user:
<p>
<pre class="linenums">
type initialAdminPassword
</pre>
<p>
It will print a string that looks like this: 2cead49b41fa41888c78d06be80fd5e7
<p>
<p>
Open this page in your browser: <a href="http://localhost:8080/">http://localhost:8080/</a>, that's where Jenkins will live.
<p>
<h3>Paste the string you got into the window.</h3>
<p>
Then select the <b>Install default plugins</b>, it will take some time to install the plugins.
<p>
It will then ask for the initial user. Give it whatever you like.
<p>
At this point you can use Jenkins and you have a single node called "master".
<p>
<h3>Create initial user</h3>
<p>
Probably a good idea to have a username/password pair that you won't forget. E.g. your own name.
<p>
<p>
Try to run the <a href="jenkins-pipeline-hello-world.html">Hello World pipeline</a>
<p>
<h2>See the container running</h2>
<p>
<pre class="linenums">
docker ps
</pre>
<p>
<p>
<h2>To stop the Jenkins server</h2>
<p>
When you are done using the Jenkins server you might want to shut down the container so it won't use your CPU.
<p>
<pre class="linenums">
docker container stop jenkins_master
</pre>
<p>
Because we used the --rm flag this will also remove the container. However the volume where we have all the data will remain.
<p>
To see the container is gone type in
<p>
<pre class="linenums">
docker ps -a
</pre>
<p>
<h2>List volumes</h2>
<p>
To see that the volume exists type in:
<p>
<pre class="linenums">
docker volume ls
</pre>
<p>
<p>
<h2>Start Jenkins again</h2>
<p>
In order to start the Jenkins server again type in the same command as you typed in when you first launched it above.
In our case this command:
<p>
<pre class="linenums">
docker run -d -v jenkins_home:/var/jenkins_home -p 8080:8080 -p 50000:50000 --name jenkins_master --rm jenkins/jenkins:lts
</pre>
<p>
You can change basically any of the options now, for example you can use a different name for the container or you can decide
to map the server to another port. The only thing that must remain the same is the content of the <b>-v</b> flag and the name of the
base image. That will ensure we use the already existing volume that has all of our installations and configurations.
<p>
<h2>Upgrading Jenkins</h2>
<p>
When there is a new release Jenkins (in its UI) will notify you and will suggest to upgrade it. That's probably useless in our case
as that would only upgrade in the currently running container, but we use the <b>--rm</b>  flag so our container will be removed when we shut down the application.
<p>
It is better to updat the image we are using.
<p>
<pre class="linenums">
docker pull jenkins/jenkins:lts
</pre>
<p>
I just upgraded this way from Jenkins 2.249.1 to Jenkins 2.263.1.
<p>
<h2>Plugins</h2>
<p>
Apparently the plugins that were installed on the first run were stored in the persistent volume we created so they survive the stop and re-start of the Docker
container and even the upgrade of the Docker image.
<p>
Once in a while Jenkins will notify you (on its UI) that new versions of the plugins are available. You can upgrade them via the UI.
The upgrades will also be persistent in the volume.
<p>
<p>
<h2>Enjoy</h2>
<p>


  <div id="after-content"></div>
</div>




<div class="prev-next">
<h2>

  <span class="label label-lg label-success prev">
    <a href="vagrant-for-jenkins-on-ubuntu.html" title="Vagrant for Jenkins on Ubuntu"><span class="glyphicon glyphicon-chevron-left"></span> Prev</a>
  </span>



  <span class="label label-lg label-success next">
    <a href="jenkins-pipeline-hello-world.html" title="Jenkins Pipeline - Hello World">Next <span class="glyphicon glyphicon-chevron-right"></span> </a>
  </span>
</h2>
</div>



<hr>
<div id="creators">
   

      
        <img src="img/szabgab.png" alt="Gabor Szabo" />
<!--
        Gábor who writes the articles of the Code Maven site offers <a href="/courses">courses</a> in in the subjects
that are discussed on this web site.
<p>
Gábor helps companies set up <b>test automation</b>, CI/CD
<b>Continuous Integration</b> and <b>Continuous Delivery</b> and other <b>DevOps</b> related
systems. Gabor can help your team improve the development speed and reduce the risk of bugs.
<p>
He is also the author of a number of <a href="https://leanpub.com/u/szabgab">eBooks</a>.
<p>
<a href="https://szabgab.com/contact.html">Contact Gabor</a> if you'd like to hire his services.
<p>
If you would like to <b>support</b> his freely available work, you can do it via
<a href="https://www.patreon.com/szabgab">Patreon</a>, <a href="https://github.com/sponsors/szabgab/">GitHub</a>,
or <a href="https://paypal.me/szabgab">PayPal</a>.


-->
        <div class="author_text">
           Written by<br>
           
             <a href="https://www.linkedin.com/in/szabgab/">Gabor Szabo</a>
           
        </div>
      

   
</div>




  <hr>
  <p>
  Published on 2020-10-03
  </p>












<div>
  If you have any comments or questions, feel free to post them on the source of this page in GitHub. <a href="https://github.com/szabgab/code-maven.com/tree/main/sites/en/pages//jenkins-in-docker.txt">Source on GitHub.</a>
  <a href="https://github.com/szabgab/code-maven.com/issues/new?title=&body=https://code-maven.com/jenkins-in-docker">Comment on this post</a>
</div>

</div>

    </div>


<div id="modal"></div>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CB0RC0YM71"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CB0RC0YM71');
</script>





</body>
</html>



